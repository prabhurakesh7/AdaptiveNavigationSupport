proper annotations methods custom sonar rules 
write custom sonar rule struggle proper annotation invoked methods rule detect illegal access methods fields marked visiblefortesting accesing elements production code illegal acceses class legal approach implement basetreevisitor visitmethodinvocation methodinvocationtree metadata belonging symbol ul li annotations methodinvocationsymbol metadata annotations li li analyse names symbols annotationinstance annotations class owner annotations package li ul works great long classes invoke method wenn call made em inside class em annotations package set unknownsymbol alternative approach analyse identifiertree annotationtree inside basetreevisitor visitmethodinvocation methodinvocationtree find package annotation sonar plugin sonar plugin api code commited href https github arxes tolina sonar plugins rel nofollow https github arxes tolina sonar plugins mvn eclipse project unexpectedaccesschecktest cases invokedfromotherclass works invokedfromsameclass passes test accident annotatione correctly detected produces output correct runnig case produces hint 

prefered work method call class work means method invoked resolved semantic symbol set unknown analyzer bugs method calls generics involved order point correct ticket required comment syntax tree identifier syntax tree wont information package concerns em syntax em find type annotation source make expected binary classpath runnnig scan property usage maven 