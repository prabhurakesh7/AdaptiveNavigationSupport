mail starttls truststore 
connect mail server starttls signed certificate mail api problem find set accepted certificates truststore starttls run application pkix path error prefer vm parameters control trusted certificates access sidenote people set implementation defined connection fails setting socket factory smtp ssl starttls starts plain text connection switches tls 

working smtp connection imap root certificates loaded standard pfx file properties build manner api docs href https javamail net nonav docs api sun mail smtp package summary html rel nofollow href https javamail net nonav docs api overview summary html rel nofollow simply replace properties br br mail transport protocol smtp br mail smtp host hostname br mail smtp port br mail smtp connecttimeout seconds br mail smtp timeout seconds br mail smtp ssl protocols tlsv1 br mail smtp starttls required true build ssl socket factory href https javamail net nonav docs api sun mail util mailsslsocketfactory html rel nofollow read api docs link br br create intialize default loading keystore br create intialize default br call br set property mail smtp ssl socketfactory instance method socket factory instance created configured set string class javamail set socket factory instance directly br properties create session make logging configured properly set trace sun mail logging shows line case shows br br br br side creating default keystore trustore href https github intercommit restlet clientcert blob master src main descartes restlet clientcert sslutils rel nofollow class methods created utility class ago load standard pfx files 