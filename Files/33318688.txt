openjdk jvm give heap memory back linux 
long lived server process infrequently lot ram short jvm memory os returns back os jvm return heap memory back os typically accepted answer questions href http stack imgur njxrs png href http stackoverflow href http stackoverflow href http stackoverflow running visualvm href http stack imgur njxrs png img src http stack imgur njxrs png alt visual vm memory usage jvm honoring heapfreeratio close amount clicking perform gc returns memory os memoryusage versions openjdk sun javas behave similarly give memory back os swap paging wont solve spending disk io paging close 2gb garbage waste resources disagree enlighten written memoryusage em em return memory os em em edit augusto pointed searching wouldve led worked ecstatic puzzled hadnt found work memoryusage img src http s20 postimg org 6d69ut8kt xxuse serial gc png alt xx useserialgc working simple app real app img src http s20 postimg org gbvtv17e5 manual gc png alt xx useserialgc working real app discovered gc em em made thread trick img src http s20 postimg org x9q934re5 gc thread working png alt gc thread working previously behavior multiple calls experiments didnt gc thread thatll continue work app evolves logic forces call times immediately stuff documented search documentation working read href http docs oracle javase docs technotes tools unix html documentation tool executable isnt mentioned works fact fixed issue href https bugs openjdk net browse jdk jdk make min maxheapfreeratio flags manageable blockquote enable applications control gc flags xx minheapfreeratio xx maxheapfreeratio made manageable support flags implemented default parallel collector blockquote href https bugs openjdk net browse jdk focusedcommentid amp page atlassian jira plugin system issuetabpanels comment tabpanel comment comment fixed issue blockquote support flags added parallelgc part adaptive size policy blockquote checked href http hg openjdk net jdk8u jdk8u hotspot rev a034dc5e910b patch referenced href https bugs openjdk net browse jdk fixed issue backported openjdk contained href http http debian net debian pool main openjdk openjdk 8u66 b17 orig tar gz source package tarball openjdk version apparently work default parallel collector doesnt demonstrated post havent found documentation work documented unreliable dicey promise hoops 

g1 xx useg1gc parallel scavenge xx useparallelgc parallelold xx useparalleloldgc return memory heap shrinks serial cms didnt shrink heap experiments parallel collectors require number gcs shrinking heap acceptable size design deliberately holding heap assuming needed future setting flag xx gctimeratio improve situation gcs shrink lot g1 remarkably good shrinking heap fast usecase solvable g1 running released caches class loaders href http bugs bugdatabase view bug bug id rel nofollow http bugs bugdatabase view bug bug id 