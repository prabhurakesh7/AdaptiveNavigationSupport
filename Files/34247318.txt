stream foreach respect encounter order sequential streams 
javadoc href https docs oracle javase docs api util stream stream html foreach util function consumer emphasis mine blockquote behavior operation explicitly nondeterministic strong parallel stream pipelines operation guarantee respect encounter order stream strong sacrifice benefit parallelism element action performed time thread library chooses action accesses shared state responsible providing required synchronization blockquote text present href http download net jdk9 docs api util stream stream html foreach util function consumer early access javadoc sentence explicitly nondeterministic suggests doesnt explicitly encounter order preserved method sentence explicitly order preserved conditioned parallel stream pipelines condition unnecessary sentence applied parallelism leaves unsure foreach preserves encounter order sequential streams href http stackoverflow answer points spot streams library implementation href http grepcode file repository grepcode root jdk openjdk 8u40 b25 util stream referencepipeline calls suggests foreach intended preserve order sequential streams bug library sidestepped ambiguity code side today discovered netbeans ides functional operations editor hint convert introduces bug foreach preserve encounter order report href https netbeans org bugzilla show bug cgi id bug netbeans library guarantees backed source strong answer drawing authoritative sources strong explicit comment library implementation discussion development mailing lists google didnt find dont magic words statement library designers href https stackoverflow users brian goetz brian goetz href https stackoverflow users stuart marks stuart marks active stack overflow answer foreachordered code doesnt wrong 

specifications exist describe minimal guarantees caller depend describe implementation gap crucial implementation flexibility evolve specification declarative implementation imperative overspecification bad underspecification specification preserve property property observed means implementation obligated preserve claimed implication encounter order preserved simply wrong conclusion doesnt promise iterating elements preserves order inserted doesnt accidentally happen count similarly implication suggests foreach intended preserve order sequential streams implementation case equally incorrect cases youre uncomfortable fact specification great deal freedom specifically freedom preserve encounter order sequential streams implementation kind hard imagine implementation process sequential sources order spec intended wording comment parallel streams potentially confusing misinterpret intent calling parallel case explicitly pedagogical spec perfectly clear sentence removed reader unaware parallelism impossible em em assume preserve encounter order sentence added clarify motivation point desire treat sequential case specially powerful beneficial clarify 