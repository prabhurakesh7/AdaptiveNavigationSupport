find scala thread locked file 
strong strong ol li find scala thread locked file class thread jvm locked concrete file overlaps region file dont find class thread stop application breakpoint li ol code throws href https docs oracle javase docs api nio channels overlappingfilelockexception html overlappingfilelockexception ol start li scala lock file href https github apache spark spark lock files nio channels didnt found invocation href https github apache spark github repository spark li ol hr hr strong problem strong run spark windows os hive works correctly time spark shuts delete temporary directory temporary directory deleted correctly outputs exception search internet found href https issues apache org jira browse spark progress issues spark user patch isnt working undenstand comment pull request correctly unanswered questions problem deleterecursively method href https github apache spark blob 3af53e61fd604fe8000e1fdf656d60b79c842d1c core src main scala org apache spark util utils scala utils scala class set breakpoint method rewrite href https github apache spark spark stopped breakpoint method found jvm thread href https github apache spark spark locked usersmyuserappdatalocaltempspark 9ba0bb0c 1e20 455d bc1f 86c696661ba3metastoredb lck file windows href https technet microsoft en sysinternals processexplorer aspx process explorer show locks file filechannel shows file locked jvm ol li find thread class locked file li li find locking files href https github apache spark spark lock metastoredb lck class unlock shutdown li li pull request href https github apache spark spark href https hive apache org hive unlock file metastoredb lck call deleterecursively method leave comment problem li ol information comments 

blockquote ol li find scala thread locked file li ol blockquote problem find solution locked object thread threadlocals field file locked code class field newfile lock code returns thread class threadlocals find threads nativebuffer class spark hive objects check threadlocals threads eclipse idea debug mode code code find class parameter isnt work case 