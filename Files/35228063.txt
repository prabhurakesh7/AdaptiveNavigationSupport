encrypt message web push api 
create server capable sending push messages push api href https developer mozilla org en docs web api push api rel nofollow https developer mozilla org en docs web api push api client side working send messages payload server nodejs web push href https www npmjs package web push rel nofollow https www npmjs package web push couldnt translate correctly dh key exchange found href http docs oracle javase docs technotes guides security crypto cryptospec html dh2ex rel nofollow http docs oracle javase docs technotes guides security crypto cryptospec html dh2ex sheltond figure code working isnt post encrypted message push service back expected status code push reaches firefox remove payload headers simply send post request url message successfully arrives firefox data suspect encrypting data cipher getinstance aes gcm nopadding code base public key push subscription key push api subscription method browser provided push endpoint url push endpoint browser provided values ciphertext base64 bobpubkeyenc salt successful nodejs web push request hard code works code dynamic values work notice ciphertext worked nodejs implementation byte bigger ciphertext code produces byte cipher text nodejs bytes give clue wrong correctly encrypt payload reaches firefox advance 

receive notifications changing code href https jrconlin github io webpushdatatestpage rel nofollow https jrconlin github io webpushdatatestpage find modified code 