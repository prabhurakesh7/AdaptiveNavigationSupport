ntlm authentication failing multithreaded application 
put code things upload files sharepoint site ntlm authentication earlier versions code single threaded worked perfectly uploaded file expected slightest issue eventually multi thread application upload files rest business multithread code fails single time throwing indexoutofboundsexception singularly unhelpful diagnosing actual problem case wondering change forcing code bask single threaded state works fine creating executor connection manager constructing threads actual code submitting threads complicated version simplified point simplified file submission method sharepointtransferer code submit multiple files throws essentially exact exception files trace exception stack trace figure causing problem greatly edit managed find workaround fixes issue explanation 

bug solved httpclient version href http www apache org dist httpcomponents httpclient release notes txt rel nofollow http www apache org dist httpcomponents httpclient release notes txt h2 release h2 h2 changelog h2 ul li httpclient ntlmengineimpl type1message thread declared constant contributed olivier lafontaine gary gregory li ul 