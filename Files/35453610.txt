pdf file download blockingqueue 
download pdf file urlconnection heres setup connection object obtained inputstream connection object output stream write file contents blockingqueue created threads performing read write operations access queue created thread read data inputstream writer thread reads file contents finally threads started theoretically read file inputstream save target file reality produces blank pdf file time shows invalid pdf format exception file size matches content length inputstream missing 

familiar hold reference array problem objects backed array repeatedly overwritten writer hard work safely publishing object thread simplest fix make effectively immutable dont change publishing thread taking copy array construction simplest problem blockingqueue accept null elements href https docs oracle javase docs api util concurrent blockingqueue html blockingqueue docs end input sentinel doesnt work replacing places fix making copy code retrieve faithful copy pdf file 