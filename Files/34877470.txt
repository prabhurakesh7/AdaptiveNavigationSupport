basic proxy authentification https urls returns http proxy authentication required 
proxy basic authentication username password connection connection code works http urls href http www google rel nofollow http www google code doesnt work https urls href https www google rel nofollow https www google access https url code works http https problem 2nd code sets default dont proxy part application part application proxy dont set global default application 1st code work https setting default overriding method class return apache httpclient 

extend handle low level related stuff steps make connection http proxy https website communication proxy http server href https nl wikipedia org wiki ascii tekenset rel nofollow ascii7 ol li send proxy li li send authentication li li end request li li read response proxy combination li li parse line response proxy check starts li li start ssl session place existing connection li li send start http request li li set proper host header li li end request http server li li read till parse line status message li li read till end stream request body li ol implement httpurlconnection class things ul li time class constructed class store data future connections make directly li li methods called order li li closure means data transfer connection finish li li api methods order li li http headers case insensitive maps case sensitive li ul quickly pitfalls class designed boolean flags remember method methods called support called closed class wrapping streams returned socket prevent complex current bugs code ul li streams closed errors post li li streams closed errors initial contact proxy li li doesnt support http redirects li li doesnt support http things chunked gzip encoding problem announce http1 client li ul code kind proxy selector check protocol url http https http dont class attach header manually h2 href https docs oracle javase docs api javax net ssl httpsurlconnection html setsslsocketfactory javax net ssl sslsocketfactory rel nofollow httpsurlconnection setsslsocketfactory h2 method attempts show wont work calling href https docs oracle javase docs api javax net ssl sslsocketfactory html createsocket net socket 20java lang string 20int 20boolean rel nofollow open connection making impossible proxy stuff manually 