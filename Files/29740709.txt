immutable class hashmap 
defined classes make iamimmutable class immutable change hashmap values testingimmutability class initialising iamimmutable applicable hashmap hashmap refer object instantiate hashmap make hashmap instance immutable iterating copying values doesnt work suggest proceed test blockquote expected output actual output blockquote 

test wrong youre checking contents map passed constructor modified check proper map things fine constructor fine original map passed constructor wont affect copy made construct time href https code google guava libraries wiki immutablecollectionsexplained rel nofollow hashmap constructor mentioned slightly readable work fine hr problem passes reference internal map world world reference things wrong easy apply copy trick constructor decorate internal map returning hr href https code google guava libraries wiki immutablecollectionsexplained rel nofollow immutablecollections guava library theyve job code bit thought efficiency ease full copies construct time map unwieldy standard underlying hashmap modification checks pointless isnt modified 