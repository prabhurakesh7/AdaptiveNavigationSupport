ecdh shared secret match crypto android 
writing ecdh implementation android crypto library wrote jni code call crypto functions function generate public private key pair function extract shared secret issue shared secrets matching situation alice bob generate public private key pairs exchange public keys successfully shared secret alice bob similar operation issue shared secrets match misunderstanding part supposed work assuming specific implementation issue side relating shared secret jni implementation retrievesharedsecret function outputs worked ideas wrong strong edit strong put test project github href https github tcolligan ap ecdhtest rel nofollow luck instructions readme running 

figure friend issue retrievesharedsecret method fact directly returning byte buffer pointing memory address scope method call scope back code essentially garbage memory shared secret tweaked code method returns custom sharedsecret object keygeneration method info copied properly dont worry scope issue revised method code update href https github tcolligan ap ecdhtest rel nofollow github project exist working android studio ndk experimental cryptopp 