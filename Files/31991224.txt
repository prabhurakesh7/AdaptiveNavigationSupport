varying classnotfoundexception log4j classes 
exception large swing spring based application error occurs user interaction triggers spring report warning commons logging turn calls log4j unable separate issue contained h2 environment h2 ul li 8u40 windows xp sp3 log4j commons logging spring li li classloading infrastructure osgi web containers li li agents profilers testing tools li li unusual xx arguments li ul h2 observations things h2 ul li manually printing classpath verify log4j jar present version present li li class loaded varies runs thowableinformation throwablerenderer fails li li application log4j classes correctly loaded warning console exception occur lt confirms log4j jar visible application assuming arent multiple classloaders play li ul code ul li successfully referenced classes loaded entry point application thowableinformation li ul code ul li breakpoints ioexception case open files error triggered li li verbose dsun misc urlclasspath debug true jvm options debug classloading shows classes loaded log4j jar li ul ul li breakpoints classnotfoundexception find information ul li launcher appclassloader urlclassloader ucp li li ucp loaders type urlclasspath fileloader urlclasspath jarloader li li found instance jarloader references log4j li li instance sun misc launcher appclassloader previously loaded log4j classes jar longer li li difference early class loading working class loading failing closed attribute urlclasspath jarloader set true fails li ul li ul h2 theories h2 ul li resource limit reached classes longer loaded reason reported li li spring core commons logging private class loading infrastructure log4j jar li ul h2 question h2 ul li li li classnotfoundexception intermittent trap li li debugging suggestions ideas li ul 

h2 root h2 urlclassloader closed unfortunate effect reporting classnotfoundexception h2 background h2 support earlier version application osgi spring dm beans spring xml allowed resources loaded correct bundles horrible hack time code resources xml files bundles upgraded spring months ago removed osgi benefit legacy pluginmoduleclassloader mechanism left place due cost removing bundles h2 closed h2 user interaction question closes application context loads side effect destroying application context spring automatically destroys beans case classloader bean calls automagically finds close method urlclassloader close means subsequent fail classnotfoundexception 