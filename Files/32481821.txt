forcing gradle earlier dependency version testing 
construct gradle build file force test phase earlier version dependency compilation packaging attempting href http hbase apache org book html integration testing hbase mini cluster rel nofollow set hbase mini cluster hbasetestingutility test project hbasetestingutility relies version guava work rest project excerpts build script href https github unbroken dome gradle testsets plugin rel nofollow gradle test sets plugin unbroken dome create separate sets tests run build script output show guava em added em classpath testintegration target em replacing em guava behavior expected api href https docs gradle org current dsl org gradle api artifacts resolutionstrategy html org gradle api artifacts resolutionstrategy force 28java lang object rel nofollow strong appends strong artifacts list considered direct gradle eliminate guava classpath testintegration target changing section assign classpaths strong strong strong strong desired effect eliminating guava retaining prevent gradle detecting location source files reason tests compiled executed variations purging guava inherited configuration variations successfully eliminate duplication guava artifact classpath nullify resolved artifact newer version 

elegant solution id interested cleaner exists approach work create completely separate configuration newer guava dependency strong strong href https docs gradle org current javadoc org gradle api file filecollection html minus 28org gradle api file filecollection rel nofollow subtract configuration classpath testintegration target firstly create configuration call sole purpose guava artifact exclude classpath configuration guava artifacts isolation strong strong config add artifact excluded classpath dependency list newly created configuration case main configurations resolve google guava guava version add dependency version guava configuration thirdly invoke href https docs gradle org current javadoc org gradle api file filecollection html minus 28org gradle api file filecollection rel nofollow gradle target force earlier version dependency order exclude newer dependency block tranformed thusly quick summary works gradle build ol li create configuration main configuration href https docs gradle org current dsl org gradle api artifacts resolutionstrategy html org gradle api artifacts resolutionstrategy force 28java lang object rel nofollow href https docs gradle org current dsl org gradle api artifacts resolutionstrategy html org gradle api artifacts resolutionstrategy forcedmodules rel nofollow strong add strong earlier version dependency configurations dependency list li li create em em configuration extend intended hold strong newer strong version dependency li li append configuration created step target force earlier dependency version li li add newer version artifact dependency configuration created step li li target block union default dependencies strong strong earlier version result actions steps remove em newer em version set href https docs gradle org current javadoc org gradle api file filecollection html minus 28org gradle api file filecollection rel nofollow created step li ol 