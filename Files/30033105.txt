jaspic module propagating principal local ejb jboss 
custom jsr module basically delegates service delegates roles oauth grants call work servlet request getuserprincipal works fine propagate ejb calls sessioncontext getcallerprincipal returns simpleprincipal anonymous expected username roles mycompanyprincipal simple class simple getname custom properties subjectinfo getauthenticatedsubject principal managed make ugly workaround workaround id standard portable define security domain standalone xml jboss web xml module part application jar war ejbs defined jars end web inf lib module changed ejb calls static method calls 

propagating authenticated identity servlet ejb ending story jboss efforts jboss engineers individual bugs fixed point jboss jboss eap assume couple bugs bug href https issues jboss org browse security rel nofollow https issues jboss org browse security filed years ago open eap branch href https issues jboss org browse security rel nofollow https issues jboss org browse security listed open fixed wf eap branch doesnt bug branches suffer href https issues jboss org browse security rel nofollow https issues jboss org browse security href https issues jboss org browse security rel nofollow https issues jboss org browse security bug jboss solved advice contact jboss alternative workaround branch providing modified implementation youll run security custom module 