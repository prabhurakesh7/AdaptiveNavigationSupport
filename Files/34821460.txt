spring transactions unit tests annotation based configuration 
trouble transactions working unit test transactiontest class spring configuration starts initializes database executes runnables parallel inserter selector logged output visible test executes records inserted selected database correct order transaction isolation expect log test code transactiontest annotations commented ahead class body include annotations log spring executes entire test separate transaction aim execute method inserter insertseveralrecords separate transaction sadly indications log spring sees transactional annotation add enabletransactionmanagement annotation transactiontest class configuration section makes difference strong transactiontest strong strong selector strong strong inserter strong missing basic wrong 

problem question caused ol li method inserter insertseveralrecords annotated transactional private method blockquote ul li public methods annotated transactional li ul blockquote li li making method inserter insertseveralrecords public start transaction method called internally method inserter run opposed externally class blockquote ul li adding support transactional spring proxies add code invocation annotated method case classes implement interface href http www ibm developerworks library jtp08305 index html rel nofollow dynamic proxies means external method calls proxy intercepted li li class inserter implements runnable interface transactional picked annotated method called directly li ul blockquote li li moving transactional annotation method inserter run fixes class successfully run test starting throw error em autowire field transactiontest inserter nosuchbeandefinitionexception qualifying bean type program test db transaction inserter found dependency em blockquote caused fact transactiontest inserter field type inserter runnable transactional annotation added method runnable interface find reference works changing autowired field type inserter runnable spring start correctly transactions executer calls inserter run dynamic proxy created interface blockquote li ol hr relevant code sections strong inserter strong strong transactiontest strong test executes correctly transactional isolation producing log output desired original question resources ol li href http www baeldung transaction configuration jpa spring rel nofollow http www baeldung transaction configuration jpa spring li li href http www nurkiewicz spring pitfalls proxying html rel nofollow http www nurkiewicz spring pitfalls proxying html li li href http www ibm developerworks library jtp08305 index html rel nofollow http www ibm developerworks library jtp08305 index html li ol 