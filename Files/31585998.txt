jpa optimistic locking 
troubles understanding optimistic lockmode br lets scenario thread creates transaction reads list users table users thread updates user table users thread commits thread commits br assume optimistic locking case 2nd commit optimisticlockexception thrown br href http www objectdb jpa persistence lock optimistic locking rel nofollow docu commit flush objectdb checks database object updated deleted compares version number object database version number memory object updated transaction fails optimisticlockexception thrown version numbers match br exception thrown version number checked entities updated deleted strong strong br href https blogs oracle carolmcdonald entry jpa concurrency rel nofollow docu jpa optimistic locking read update entity version check made commit exception thrown version updated database entity read br desc exception thrown version check made commit assume commit including commits read achieve scenario throw concurency exception problem thread returns list users recent correct optimistic locking locktype 

links gave thing entity updated transactiona modified db transactionb transactiona read entity optimisticlockexception thrown case retrieving list users threada em update em optimisticlockexception em em entity changed committed attempted threadb exception thrown case updates succeed commit simply override earlier commit indeterminate threada threadb db contents intended locking prevents undesired behaviour application transactions regularly colliding data pessimistic locking href https blogs oracle carolmcdonald entry jpa concurrency rel nofollow https blogs oracle carolmcdonald entry jpa concurrency 