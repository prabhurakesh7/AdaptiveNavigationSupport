exception localxaresourceimpl commit give warning 
wildfly distributed transaction oracle xa datasource custom jca localtransaction resource connection file basically works expected resources fails commit transaction rolled back database file updated written special case jpa values entity database writing file fails exist warning exception thrown ejb returns instance implementing writeable throws equals database merge warning issued entity merged updated transaction fails expected effectively requirement satisfied id transaction fail exception case raise error oracle xa datasource resource adapter aware enlist localtransaction resource resource transaction handle file transaction changed transaction fails commit fails throwing understand warning logged commit local transaction fails property set exception case warning 

read href https access redhat documentation en jboss enterprise application platform html administration configuration guide lrco overview html rel nofollow documentation jboss eap describes lrco algorithm enlist single phase aware resource transaction involves phase aware resources blockquote xa transaction protocol designed provide acid properties phase commit protocol model xa aware resource manager participate transaction case data stores support distributed transactions situation technique resource commit optimization lrco called resource gambit phase aware resource processed prepare phase transaction time attempt made commit attempt successful transaction log written remaining resources phase commit resource fails commit transaction rolled back protocol transactions complete errors inconsistent transaction outcome reason lrco resort single transaction lrco automatically applied situations designate resource special marker interface refer jboss transactions programmers guide details blockquote assumption dont modify merged entity written undo log prepare phase phase aware resource transaction commit phase resource transaction fails file write occurs end prepare phase undone phase resource transaction dont rollbackexception anymore corresponded rollback phase resource transaction involved global transaction 