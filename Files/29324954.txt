bufferedinputstream hanging reaching end file 
ssl tls server amp client sockets client simply sends file server server receives codes client method server method problem server hangs inside loop reaches file received message file small bis read method returns end file reason tested methods file size bytes output client terminal server terminal server reaches file received message hangs inside loop end stream reached guess reason 

server detects file checks closed connection end reason receive bytes read close connection flush replace method work hr dont close connection work add em protocol em sort default thing easier ways implement send length file bit bit integer em em file server bytes read file fully hr dont length file options consensus effective protocols approaches dont suggestions tune ol li piece data send length data send bit bit signed integer file multiple pieces data sending negative number means previous piece piece file ended needed send piece larger maximum represent signed bit integer split pieces li li random number long length bytes bytes occur data send number file file send event similar mime multi part encoding li li byte number bytes file ended 0xff ensure legitimately send 0xff part file add rule means file ended means literal 0xff file li li ways li ol 