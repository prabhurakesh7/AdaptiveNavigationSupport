correct stop custom logback async appender 
created amazon sqs sns logback appenders amazons sdk basic appenders synchronous apis created asynchronous versions extending class stopping logback logger context async appenders work expected context stopped async appenders flush remaining events exiting problem originates href https github qos ch logback blob master logback core src main ch qos logback core asyncappenderbase l113 rel nofollow method interrupts worker thread interrupt triggered amazon sdk processing queued events results tests happened sdk processing response api actual message case intended logback interrupts worker thread workers process remaining event queue work caused interrupt override stop methods remove interrupt require copy pasting implementation 

finally managed figure solution guess optimal simple working attempt asynchronous versions aws sdk apis logback provided executor internal executor interrupt problem avoided didnt work work queues shared case queue appender specific stopping correctly needed executor appender needed executor aws clients catch executor provided thread factory create daemon threads block indefinitely logbacks jvm shutdown hook issue stop appender correctly interrupt required handling interrupted exception retry executor skip waiting queue flush normal logback appenders expected work syncronous manner shouldnt lose logging events proper shutdown hook problem current async aws sdk api calls decided countdown latch provide blocking appender behavior handle waiting latch bundled simplified version real implementation showing relevant parts issue required handle cases properly ul li flush remaining event queue logback context stop shutdown hook async appender wrapper li li block indefinitely logbacks delayed shutdown hook li li provide blocking behavior async appender li li survive interrupt async appender stop caused aws sdk stream implementations interrupt li ul open source project href https github trautonen logback ext rel nofollow logback extensions maintainer 