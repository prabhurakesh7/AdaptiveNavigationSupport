regex replace nested tokens 
regex pattern escape curly braces programatically input regex match patterns text tags fine nested tags iteration recursion problem running innermost token escaped messes match negative lookbehinds doesnt expect match replace innermost token suggestions advance edit input output edit process tags resolved text end valid regex 

determine digits output 