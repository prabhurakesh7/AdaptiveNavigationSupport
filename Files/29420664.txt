issues writing file metadata nio 
add custom metadata tag type file functionality nio file files read metadata correctly issues set metadata set custom metadata element plain string files setattribute end error exception thread main lang classcastexception lang string cast nio bytebuffer cast string bytebuffer outputting text test outputs strange character string 14e3f41 proper convert string bytebuffer convertable back string customizable modify metadata file 

user defined attributes attribute defined href http docs oracle javase docs api nio file attribute userdefinedfileattributeview html rel nofollow provided supports readable writable byte arrays attribute text content process dependent encoding string question methods means options write attributes ul li li li plain byte array li ul em read em byte array javadoc link emphasis mine blockquote dynamic access file attributes required getattribute method read attribute strong attribute returned byte array byte setattribute method write user defined attribute buffer invoking write method byte array byte strong blockquote case ul li order em write em attribute obtain byte array requested encoding string li li order em read em attribute youll cast result byte array obtain string correct encoding li ul hr peek solution case mentioned deal class obtain implementation method view disposal read write instance read attribute attribute em em view order write youll wrap byte array control involved final pretty dictates user defined attributes user defined attribute view exist responsibility correctly handle errors attribute exist jdk offers thing kind scenario 