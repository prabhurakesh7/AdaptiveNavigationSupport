preauthenticatedauthenticationprovider usernamenotfound exception returns denied page 
spring release spring security release requestheaderauthenticationfilter preauthenticatedauthenticationprovider application show denied page user service throws usernamenotfoundexception application shows basic http authorization form simple browser popup credentials response cancelled configuration class userdetailsserviceimpl checks user db throws usernamenotfoundexception user found problem advise advance alex 

behaviour due exceptiontranslationfilter translating final exception blockquote access denied user anonymous redirecting authentication entry point blockquote user anonymous userdetailsservice threw exception response implemented href http docs spring io autorepo docs spring security current apidocs org springframework security web authentication www basicauthenticationentrypoint html rel nofollow basicauthenticationentrypoint acts authentication entry point case xmlhttprequest case anonymous user principal case show access denied page giving anonymous user chance authenticate plug href http docs spring io spring security site docs current apidocs org springframework security web authenticationentrypoint html rel nofollow authenticationentrypoint entry point ref attribute http element accessdeniedhandler picture resulting implmentation ps youll configure authentication entry point spring bean starts working 