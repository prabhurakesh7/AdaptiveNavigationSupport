chaining side effects spock stub void return type 
test contrived code makes call attempts retry call fails testing strategy mock object stub response throw exception call succeed attempt spock replacing void null cast exceptions mock desired response 

test passes added comments show step 