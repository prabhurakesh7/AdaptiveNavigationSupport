palette colour quantization android 
developing project android requires filter colors including background color approximate white advanced maths algorithms dont maths lost completely simple logics algorithms derived partly trial error partly logical result works suggestions make work test algorithm scribbled random words letters colored pens plain white 5th color paper wrote code decode colors code algorithm ul li red pen ink pixel decoded pixel set digital red li li blue pen ink pixel decoded pixel set digital blue li li green pen ink pixel decoded pixel set digital green li li black pen ink pixel decoded pixel set digital yellow li ul black ink pixel set digital yellow black black hard distinguish ink black visually code results overlap fringes black represented digital yellow red represented digital red code partly logic partly trial error question improve algorithm decode filter colors perfectly chose method lost quickly complex maths make work shades light white light yellow light strong edit comments discussions realised palette color quantization adroid code strong img src http stack imgur w7cgj jpg alt undecoded original image img src http stack imgur ihiq5 png alt decoded image good 

strong href http stackoverflow hsv color space strong detect colors human perception lot href http stackoverflow hsv histogram detect distinct colors href http stack imgur l10w1 png rel nofollow img src http stack imgur l10w1 png alt hsv histogram strong rgb compare differently strong pen pixel compute distance compute color pens choose smallest precise strong colors prior histograms strong ol li form color table set distinct visible colors set found pen li li create empty list found colors li li process pixels input image li li compute distance found colors list li li smaller treshold constant pixels belong color found colors list add found color li li recolor pixel color recolor table li ol eliminate shading anti aliasing color distortions ignore recolor table color found colors list process form strong color quantization strong strong edit1 hsv color recoloring found color list histogram result strong href http stack imgur piua9 png rel nofollow img src http stack imgur piua9 png alt hsv simple recolor shows image lighting conditions render real photo href http stackoverflow ilumination normalization improve tresholds gray scales colors distinguish detect background color ul li pixel count bigger color text li li dispersion image cover large area high density uniformly dispersed text localized li ul vcl source ul li dynamic array represents li li mine image class holds strong gdi strong bitmap resolution li li holds found colors li ul strong edit1 bi cubic illumination normalization strong recently rewriting strong dip strong lib upgrading mine illumination normalization give shot input image test images result forced detected empty space recolor href http stack imgur j8xaa jpg rel nofollow img src http stack imgur j8xaa jpg alt normalized image middle red ish lighting spot algo applying illumination normalization helps encoding bit complicated properly ol li strong create grid table image strong strong cell strong strong average color strong cumulative strong delta strong noise cell area single flag telling cell strong paper strong strong ink strong cell size min detail size letter pen width li li strong set cells high delta ink rest paper strong li li strong compute average color paper cells combined strong li li strong paper cell neighboring ink cell strong set ink average color global average paper color carefull newly ink set cells neighbor condition step temp flag flag bit restore li li strong find control points uniformly dispersed image paper cells strong coordinates image resolution bi cubic interpolation valid li li strong pixel strong bi cubically compute cell color call apply normalization pixel strong rgb space strong ul li li ul equalize paper color image close match leaving paper details undistorted li li strong optionally recolor paper cells area strong eliminate noise background paper texture li ol 