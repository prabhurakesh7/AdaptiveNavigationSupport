collectors turning stream parallel 
answer question href http stackoverflow questions skip lines streamstring obtained files lines skip lines stream lt string gt obtained files lines collector wouldnt work parallel works strong edit didnt work fooled fact input set small trigger parallelism discussion comments strong thought wouldnt work plans executions mind hr h2 array shared threads h2 thread t1 read element stream condition satisfied adds element list execution stops time update array thread t2 started 4th element stream add list end wanted element collector works guess doesnt work updates atomic hr h2 thread copy array h2 case problems update prevents thread t2 start 4th element stream doesnt work hr doesnt work brings question collector parallel explain basically works collector works ran parallel 

passing source stream collector break logic shared state strong strong incremented tasks verify returning correct result finite stream input infinite streams reading strong generate significant amount data strong stream forks task run chunks concurrently output wrong hr holger comments correctly pointed race happen collector case operate single shared collection tasks called stream run accumulator collection strong task strong combine result defined combiner youd add characteristics collector run result due shared state single collection 