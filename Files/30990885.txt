run springapplication annotationconfigwebapplicationcontext 
springapplication runs fine default applicationcontext scenario refresh context default context update main application class code calling app run args results stack trace stepping springapplication run noticed contexts beanfactory null remove line setting application default context code runs point call refresh call results annotationconfigwebapplicationcontext springapplication manner work suggestions work ways create beanfactory manually prior calling app run public methods advance provided strong edit clarification strong comments answers explicit original post scenario requires refreshing applicationcontext attempt annotationconfigwebapplicationcontext code runs server starts backup restore purposes involves modifying content jparepositories understanding running code refresh applicationcontext order call init methods attempting default context class annotationconfigembeddedwebapplicationcontext subclass genericapplicationcontext throws illegalstateexception mentioned exception prompted attempt explicitly set context annotationconfigwebapplicationcontext subclass abstractrefreshableapplicationcontext assumption needed application abstractrefreshableapplicationcontext order make multiple calls refresh method successfully code work alternative approach taking refresh context multiple times 

spring boot making overly complex change class make package make dependency enables web application mess context class 