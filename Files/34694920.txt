lru caffeine 
caffeine lru cache entries added evicted ran code prints expected wrong 

caffeine implement lru cache eviction policy caffeine policy called href http arxiv org pdf pdf rel nofollow tinylfu caffeine documentation includes page href https github ben manes caffeine wiki efficiency rel nofollow efficiency discusses rationale design choice quoting page blockquote relies frequency sketch probabilistically estimate historic usage entry blockquote caffeine fact implement lru dont reliably expect exhibit strict lru behavior inspect entries cache absolutely lru behavior jdk standard href http docs oracle javase docs api util linkedhashmap html rel nofollow good choice subclass override href http docs oracle javase docs api util linkedhashmap html removeeldestentry util map entry rel nofollow logic signal cache grown larger multi threaded usage youll wrap operations synchronization caffeine heavily inspired href https code google guava libraries wiki cachesexplained rel nofollow guava cache similarly concurrent access approximate lru behavior quick test code guava cache shows similar results aware standard library provide predictable externally observable lru results true concurrent access coarse grained lock reconsider requirement strict externally observable lru results nature cache fast temporary storage provide optimized lookups expect program behavior change drastically dependent cache implements strict lru approximation lru lfu eviction policy prior question great discussion lru cache options href http stackoverflow questions implement lru cache implement lru cache 