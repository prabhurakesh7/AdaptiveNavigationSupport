concurrentmodificationexception stream maps key set 
remove items keys present code receive stream parallel elegant 

eran href http stackoverflow explained solve problem explain occurs occurs modifying stream source concurrent map lets assume stream backed href https docs oracle javase docs api util spliterator html rel nofollow spliterator characteristics documentation blockquote binding spliterator effort basis throw structural interference detected spliterators called em fail fast em blockquote modified concurrent updates unsafe detects concurrent throws spliterator documentation prescribes worth citing href https docs oracle javase docs api util hashmap html rel nofollow documentation blockquote iterators returned classs collection view methods em fail fast em map structurally modified time iterator created iterators remove method iterator throw face concurrent modification iterator fails quickly cleanly risking arbitrary deterministic behavior undetermined time future fail fast behavior iterator guaranteed generally speaking impossible make hard guarantees presence unsynchronized concurrent modification fail fast iterators throw effort basis wrong write program depended exception correctness em fail fast behavior iterators detect bugs em blockquote iterators spliterators 