powermock lang classcastexception sun net www protocol https httpsurlconnectionimpl cast javax net ssl httpsurlconnection 
created mock based href http stackoverflow stackexchange answer cast exception problem lies code source code implements suggestions remedy problem 

strong issue conflict regular class loader powermocks strong drawback powermock custom class loader class loader modify type signatures incompatible default class loader circumstances instantiation reflection default class loader load type class loader type loaded powermock signatures result casting errors objects implement cast type strong avoid problem stop powermock loading strong prevent cast exception ensure javax net ssl httpsurlconnection loaded class loader stop regular class loader approach stop powermock loader acting annotation side effect powermock longer provide version strong expose httpsurlconnection construction substitute mock object strong introduce factory httpsurlconnection create mock httpsurlconnection object http request 