camel failure add routes dynamically 
apache camel add routes dynamically problem baffles add routes correct called throwing exceptions execute main route run time exception telling route added dynamically exist simplified version code requests work camel startup console send request output comment uncomment camel starts output console send request execution route fails exception strong clarify strong problem instantiate time call route instantiate point plug instance assumption nested route created wrong console output tells idea wrong 

h2 route configuration route execution h2 confusing route configuration route execution weve configure routebuilder method executed strong strong camel app bootstraps order set routing logic dsl creates plumbing route processors interceptors strong strong route runtime strong point bring home strong dsl strong strong executed exchange words camel point doesnt execute single exchange bytecode executed configuring camel bytecode instantiates object class invokes argument resulting object fed href https camel apache org maven camel camel core apidocs org apache camel processor sendprocessor html rel nofollow dsl generates h2 analysis code h2 code doesnt yield result expect problem state keeping time call overwrite instance variable impossible current code call times call end recently generated route added dont masking camel class class act placeholder brings discussion didnt h2 simpler solution h2 class heres class creates routes returns endpoint caller track routes internal instantiates generate routes finish configuring routes iterate accumulated include h2 edit doesnt option work h2 debugging time realised youre effect extracted href https docs oracle javase tutorial javaoo nested html rel nofollow tutorial blockquote instance methods variables class instance enclosing class direct access objects methods fields blockquote create instance scope initial object acting outer object object retains outer outer object subsequent methods invoked strong initial object create strong provide upper routebuilder camelcontext added camel context created route builder console output route added context context created camel lazily adds route routebuilder hasnt camel context camel context initial routecontainer created instance variable initialization assign property route builders adding statements strong inside route configure strong strong inside mainroutebuilder configure strong hashcode strong strong hashcode strong strong showing routebuilders play route loaded context include route hr source apache camel pmc member committer 