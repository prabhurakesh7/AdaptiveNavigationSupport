random disconnects master node nonodeavailableexception elastic cloud found 
elastic cloud found shield transport client app communicating es runs heroku running stress test staging environment node beginning works perfectly time minutes begin errors set log level trace errors replaced irrelevant properties set query make version clients machine node errors stress test errors happened randomly wanted reproduce running single node spotted error logs hot threads reading href http blog trifork dealing nodenotavailableexceptions elasticsearch rel nofollow http blog trifork dealing nodenotavailableexceptions elasticsearch understand communication works havent tested problem lies thing confirm problem closed query connections handle config reconnect disable worrying 

citing link href https discuss elastic nonodeavailableexception transport client rel nofollow https discuss elastic nonodeavailableexception transport client href https www linkedin konrad beiske 10480b21 rel nofollow konrad beiske blockquote application resolving ip address boot time elb change ips point time reliability application add ips elb client periodically check dns service connection timeout elbs minutes blockquote fix blockquote creating transportclient request ideal imply connection handshake request hurt response time pool transportclients prefer unnecessary overhead client thread suggestion create small singleton service periodically checks dns service adds ips existing transport client theory naive adding ips discovered time checks transport client discard duplicate addresses purges addresses longer reachable blockquote 