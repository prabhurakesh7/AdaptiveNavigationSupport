azure retrieving publicipaddress virtualmachines azure sdk 
href http stackoverflow questions retrieve list networks subscription windows azure azure sd answer page found retrieve size public ips code azure ad serviceprincipal authentication returns certificate authentication strong href https management azure rel nofollow https management azure strong api returns authenticationfailed idea retrieve virtual machines public ip address authenticate ip 

issue caused incorrect authentication authentication code works azure service management authenticating azure resource management doc authenticating azure resource management request href https msdn microsoft en library azure dn790557 aspx rel nofollow https msdn microsoft en library azure dn790557 aspx tasks resources azure resource manager authenticated azure active directory modify authenticate configuration code subscription id tenant id client id client secret follow complete authenticate code serviceprincipal refer href https github azure azure sdk blob master azure mgmt samples src main microsoft azure samples authentication serviceprincipalexample rel nofollow https github azure azure sdk blob master azure mgmt samples src main microsoft azure samples authentication serviceprincipalexample thread href http stackoverflow questions retrieve list networks subscription windows azure azure sd retrieve list networks subscription windows azure azure sdk answers url moves href https github azure azure sdk blob master service management azure svc mgmt network src main microsoft windowsazure management network networkoperations rel nofollow https github azure azure sdk blob master service management azure svc mgmt network src main microsoft windowsazure management network networkoperations 