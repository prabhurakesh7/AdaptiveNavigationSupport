anonymous class instance generate bytecode class 
difficulty generated bytecode class loaded wondering object anonymous class initiliaze class anonymous class class callee constructor accepts callee2 parameter runtime generated classes callee2 callee classes loaded callee constructor changed generated class callee2 created instance callee2 create instance callee fail args meanless class loaded anonymous loader anonymous classes referenced class loaders puzzles pass objects objs array method invocation exception occurs invocation getconstructor args message exception anonymous class transient classloader case initialize callee anonymous class callee2 instance bytecodes callees constructor reads callee2s field members workaround pass callee2 instance callees constructor 

href http grepcode file repository grepcode root jdk openjdk b132 sun misc unsafe rel nofollow signature documentation comment standard api documentation part official api blockquote define class make class loader system dictionary cp entry cp patch null format matches tag ul li integer long float double wrapper object type lang li li utf8 string suitable syntax signature class lang class object li li string object lang string li li interfacemethodref nyi method handle invoke call sites arguments li ul params null entries exist replace cp entries data blockquote words provide array size constant pool class define don modify places constant pool representing anonymous class simply pass object array lookup class don provide correct class class bytes limitations ul li problem arise circular dependencies existing object patch pool class class resolved lazily work li li patch sufficient accessing members class creating instances doesn anonymous class part em signature em declare field type method parameter return type access methods option patching entry ahem implemented guess nyi means implemented li ul 