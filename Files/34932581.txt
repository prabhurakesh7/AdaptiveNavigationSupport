force spring security update xsrf token cookie 
rest spring security service spring boot application failing immediately update cookie user authenticates causing request return error service called problem resolved rest service properly updates xsrf token cookie request response transaction whichit authenticates user backend rest service called times front end app service returns matched cookies call call ol li request server credentials username password url pattern calls service server responds anonymous user network tab firefox developer tools shows cookies user makes requests publicly accessible resources error network tab firefox developer tools shows cookie values li li request service login form sends valid username password service authenticate user service returns updated jsessionid cookie update xsrf token cookie step cookies shown network tab firefox developer tools point included cookies network tab firefox response included include results mismatch causing error due invalid csrf token subsequent requests rest services resolved call service force preceding return li li call backend rest service username password credentials request shown call results cookie updated properly correct retained network tab firefox developer tools shows point shows mismatched request forces update response li ol updated xsrf token matches jsessionid subsequent requests backend rest services succeed specific made code force update cookies time service called proper username password login form make specific code backend method spring change made security configuration classes fix problem code backend service security config main application class spring boot backend app relevant segment server logs showing error specific make code resolve error force update cookie backend service users status login logout guessing based research solution problem involve changing configuration combination spring security classes defined shown ol li href http docs spring io spring security site docs current apidocs org springframework security config annotation web configuration websecurityconfigureradapter html rel nofollow websecurityconfigureradapter li li href https docs spring io spring docs current javadoc api org springframework web filter onceperrequestfilter html rel nofollow onceperrequestfilter li li href https docs spring io spring security site docs current snapshot apidocs org springframework security web csrf csrftokenrepository html rel nofollow csrftokenrepository li li href http docs spring io autorepo docs spring security release apidocs org springframework security config annotation authentication configurers globalauthenticationconfigureradapter html rel nofollow globalauthenticationconfigureradapter li li href https docs oracle javase docs api security principal html rel nofollow principal returned service li ol specific made solve problem 

h1 updated answer h1 reason basic authentication header found request user registering means spring security validate credentials user present responds ul li make register endpoint public provide controller registers user li li include username password registration form authorization header spring security validate credentials include parameters json form encoded parameters register controller process li ul h1 original answer h1 authenticating spring security invalidate csrftokens ensure session fixation attack triggers csrftoken problem invoked authentication performed means checks token changed result false changed resolve issue inject custom pre class lang prettyprint override configure pre class lang prettyprint override 