memory mapped files multithreading read write 
threads concurrently access large file txt 1st thread reading file 2nd thread writing file threads access block start blocksize strong channel amp buffer instances strong strong reader strong strong writer strong starts time overlapping exceptions point overlapping happing occurs lock lets writer access reader access point channel closed points 

summing notes chat conversation op op mental model thread writes data structure data structure immediately visible threads ops tests memory mapped files confirmed appeared true single socket intel cpu true area show underlying behaviour hardware designed assume code single threaded optimised times told means differ hardware version hotspot statistics hotspot collected complexity running single socket intel cpu invalidated ops test information links gain deeper understanding memory model synchronized mutual exclusion hardware terms data visibility instruction ordering topics single threaded code granted ul li href http tutorials jenkov concurrency memory model html rel nofollow memory model li li href http www cs umd pugh memorymodel doublecheckedlocking html rel nofollow double checked locking broken li li href https www cs umd pugh memorymodel jsr faq html rel nofollow jsr li ul worry takes time sink feel overwhelmed felt amazing job hiding complexity follow simple rule thread reads modifies shared data structure synchronized block writing thread reading thread simplifying follow rule program work break deep understanding memory model memory barriers relates hardware concurrency experts avoid breaking rule single threaded simpler href http mechanical sympathy blogspot uk compact heap structurestuples html rel nofollow surprisingly fast low latency systems designed single threaded reason hr directly answer ops question sample code question locks memory barriers concurrency controls behaviour reads writes interact undefined work work time intel strongest memory guarantees cpus running test cases single socket intel cpu miss lot complex bugs sun caught jsr read article double checked locking broken detail 