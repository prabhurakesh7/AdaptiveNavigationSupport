reliably detect atomic move directory failed target exists 
server initializing working directory resource access resource parallel requests resource handled multiple processes server means care processes sees partially initialized working directory solution initialize working directories temporary sibling directory move final location case processes initialize working directory time atomic move fails problem working directory initialized correctly process discard temporary directory created continue code noticed catching doesnt case move collision exceptions thrown dont catch exceptions hiding real problems isnt reliably detect exception thrown files move atomic move directory failed target directory existed 

observing exceptions implementations windows linux found ul li windows thrown move directory existing directory li li unix relatives generic filesystemexception thrown message corresponds href http man7 org linux man pages man3 errno html rel nofollow constant li ul programming implementation details detect directory move collisions danger hiding problems code implements atomic move throws case move collision 