hibernate multitenancy change tenant session 
developing saas solution consumers solution based spring wicket hibernate database data customers weve decided model database ul li public br em shared data customers user accounts customer user belongs em li li customer li li customer li li li ul work setup multi tenancy setup tenantidentifierresolver method called servlet filter request filter processed connection opened database weve implemented set issues query request works charm requests passing servlet filter real problem weve entrypoints application pass servlet filter instance soap endpoints timed jobs executed pass servlet filter proves problem job endpoint receives identify customer job endpoint request unique mapped database schema query database customer spring initializes complete hibernate session session default tenant id mapped specific customer weve resolved unique customer session change tenant identifier supported thing thought solution method method work context job endpoint leads session closed transaction succesfully started bit lost weve find solution weve misunderstood weve misinterpreted fix problem recap created user request timed job pass servlet filter tenant identifier hibernate session started unique values translate tenant identifier querying database existing hibernate session alter tenant identifier issue statement 

weve found true solution problem href http stackoverflow users chimmi chimmi linked jira ticket requested feature href https hibernate atlassian net browse hhh rel nofollow https hibernate atlassian net browse hhh ticket behavior unsupported weve found workaround number times feature limited feasible run operations separate threads default concurrency implementation running operation separate thread session created session threadbound important set tenant variable shared threads static variable currenttenantidentifierresolver running operation separate thread implement callables implemented spring beans scope instance created time requested autowired weve implemented abstract implementation finalizes method defined interface implementation starts hibernatesession code 