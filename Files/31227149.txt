type inference working lambda expression scenario 
weird scenario type inference isnt working id expect lambda expression heres approximation real scenario compile error line blockquote method booleanvalue undefined type object blockquote cast lambda change method signature raw types problem id expect work ul li call infer return type li li lambda inferred li ul doesnt inference work expected change api make work expected 

h2 hood h2 hidden features information whats happening lot information lets break phase href https docs oracle javase specs jls se8 html jls html jls rel nofollow method applicability phase br actuals actual arguments passed br type args explicit type arguments br candidates href https docs oracle javase specs jls se8 html jls html jls rel nofollow potentially applicable methods actuals implicitly typed lambda href https docs oracle javase specs jls se8 html jls html jls rel nofollow pertinent applicability compiler resolves invocation method named partially instantiated actuals type args change deferred inference stage instantiated signature fully instantiated signature result step point type inference made signature br target type context call made method invocation part assignment left hand side method invocation part method invocation parameter type method invocation dangling target type target type inference inferred hr h2 analysis h2 compiler implicitly typed lambdas inference extent makes sense general compile type infer type lead chicken egg type problem improvements made future releases hr h2 solutions h2 solution explicit type argument section partial instantiation method signature hr solution explicitly types lambda pertinent applicability partial instantiation method signature hr slightly flavor hr solution explicit target method call deferred instantiation infer type parameter hr h2 disclaimer h2 behavior occurring dont jls dig find exact section specifies behavior href https docs oracle javase specs jls se8 html jls html rel nofollow type inference notation headache doesnt fully explain changing raw fix issue reason changing raw deferred instantiation infer speculate guess compiler fit lambda infer body lambda implies earlier analysis incorrect compiler em em perform type inference body lambda type variables em em return type 