spring data jpa detached entity 
started work spring boot application spring data jpa setup manytomany relationship users roles relationship defined user class create roles assigning roles users fails exception thrown formatted readability user saved relationship created works fine save update user unreasonable assign received role strong user strong saving user 

save entity spring internally checks entity forget exact mechanism issues persist merge existing defined user userrole relationship cascade persists merge user cascade userrole spring implements save behavior cascading scenarios ul li user userrole youll persist action saving user cascading persist userrole works fine userrole li li user userrole existing youll persist action saving user cascading persist userrole results error userrole exists li ul guarantee userrole add relationship user exists simply remove cascade persist cascade options youll merge custom repository entitymanager saving user scenarios cascade situation doesnt make sense youve manytomany relationship cascading user userrole undesired effects cascade remove remove userrole time user removed 