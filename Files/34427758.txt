treeset number elements efficiently 
calculate number elements integers fast ul li subset li li headset li li tailset li ul methods slow count numbers hr edit found workaround makes things lot faster bitset cardinality method create bitset element added treeset set index bitset count number elements bitset cardinality faster compared treeset subset true true size assume bitset cardinality doesnt linear search 

dont update data structure number elements hashmap update frequently sorted linked list numbers insert remove add remove list update hashmap log log update sorted binary tree element tree number descendants items lt find binary tree sum number elements left update update ancestors element accept approximate answers faster ways 