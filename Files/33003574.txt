reentrant readwrite lock synchronization iswritelocked 
implementing session manager class functionality read refresh session tokens demand session token refreshed fetched server session token readers block refresh complete similarly refresh request blocked ongoing reads complete session token read requests frequent compared session token refresh requests decided reentrantreadwritelock achieve synchronisation read refresh attempt trylock write lock locked writing trylock return false acquire read lock block write lock released rescheduling read blocked threads complete read logic works case multiple threads invoke refreshsession time allowing thread initiate session token refresh threads fall block read lock logic fail thread acquired read lock calling readtoken thread invokes refreshtoken acquire write lock trylock fail case missing refresh request result alternative readwritelock iswritelocked method checks thread acquired write lock experience method synchronisation repercussions ensure thread acquire write lock subsequent requests fall read suggestions pointers appreciated 

introduce reentrantlock promises writer fails quickly exists writer thread write threads read writing progressing 