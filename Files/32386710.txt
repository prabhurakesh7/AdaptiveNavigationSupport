elasticsearch api bulk delete working 
attempting perform bulk delete documents ids derived previous search query determine documents candidates deletion producing desired results thousands records bulk delete deletes records time feeding results original query 

default search response returns top results thousands millions size parameter request default naive approach paginating throw results normal search changing parameter lead missing delete records command execute search result search shifted comparing previous search result deleting records previous search proper approach specialized href https www elastic guide en elasticsearch guide current scan scroll html rel nofollow scan scroll search paginate throw records type search results consistent calls approach found href https github elastic elasticsearch blob master plugins delete query src main org elasticsearch action deletebyquery transportdeletebyqueryaction l104 rel nofollow delete query plugin v2 href https www elastic guide en elasticsearch reference docs delete query html rel nofollow delete query functionality exists previous versions elasticsearch easiest solution problem recommend scan scroll href https www elastic blog core delete query plugin rel nofollow poor performance fragility existing delete query api implementation pre v2 