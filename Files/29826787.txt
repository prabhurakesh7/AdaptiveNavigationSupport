dictionary function thread concurrenthashmap atomicinteger 
write simple dictionary append dictionary shared threads thread calls make id returned word id unique word synchronize access method fun wondered lock free achieve wondering thread safety href https docs oracle javase docs api util concurrent concurrentmap html computeifabsent util function function rel nofollow javadoc interface blockquote default implementation retry steps multiple threads attempt updates including potentially calling mapping function multiple times blockquote description clear means mapping function em em called strong strong key case mapper called key code thread call key word case code thread confirm 

guaranteed thread href https docs oracle javase docs api util concurrent concurrentmap html rel nofollow javadoc emphasis mine blockquote actions thread prior placing object concurrentmap key href https docs oracle javase docs api util concurrent package summary html memoryvisibility rel nofollow em happen em actions subsequent strong access removal strong object concurrentmap thread blockquote href https docs oracle javase docs api util concurrent concurrenthashmap html rel nofollow javadoc similar blockquote concurrenthashmap scalable frequency map form histogram multiset longadder values initializing computeifabsent add count blockquote analogous package javadoc talks blockquote href https docs oracle javase specs jls se7 html jls html jls rel nofollow chapter language specification defines em em relation memory operations reads writes shared variables results write thread guaranteed visible read thread write operation em em read operation blockquote language specification blockquote actions ordered relationship action visible ordered blockquote code thread 