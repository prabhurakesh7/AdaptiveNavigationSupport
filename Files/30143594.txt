spring jpa hibernate increment counter concurrency issues 
playing bit spring jpa hibernate bit confused increment counter table rest api increment decrement database depending user action bellow liking disliking tag make counter increment decrement tag table tagrepository jparepository spring data configured transaction put purpose sleep increment save test concurrency scenario initial tag counter blockquote user calls increasetag code hits sleep entity db user calls decreasetag code database sleeps finishes hits save entity count hits save blockquote check database tag equal reality achieve equal behaviour normal transactional annotation work 

simplest solution href http vladmihalcea data knowledge stack rel nofollow delegate concurrency database simply rely href http vladmihalcea beginners guide transaction isolation levels enterprise rel nofollow database isolation level lock modified rows increment simple decrement query update query takes lock modified rows preventing transactions modifying row href http vladmihalcea beginners guide acid database transactions rel nofollow current transaction commits long dont 