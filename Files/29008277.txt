test component output database cucumber 
recently discussion team properly test component system output stored database ddd create system component ultimately talks repository stores implemented talk mongodb testing framework cucumber database testing memory version mongo scenarios command input output event assertions event scenario event processed result stored database result retrieved rest call discussion test scenarios correct check memory database event processed output system ultimate part system stores tested part scenario testing memory database stores production ready logic write output convenience repositories retrieve data easier related scenario hand hand people shouldnt checking database component shouldnt accessing test case rest call retrieving data rest call part test verify output scenario include parts storing retrieving splitting tests correct answer missing point 

id verifying rest call correct wouldnt blackbox testing test depend internal implementation details database structure effect application world database part imo assuming tests creating intended blackbox tests integration test grey box guess imo checking database repository idea intended unit test dependencies component mocked mocks verify component called repository correctly misunderstood 